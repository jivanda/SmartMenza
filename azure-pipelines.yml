trigger:
- main

pool:
  name: Default

steps:
- checkout: self

- script: java -version
  displayName: 'Verify Java version'

- script: |
    echo Building Android Debug APK...
    if exist gradlew.bat (
      gradlew.bat clean assembleDebug --stacktrace
    ) else (
      chmod +x ./gradlew
      ./gradlew clean assembleDebug --stacktrace
    )
  displayName: 'Build Debug APK'

- task: PublishBuildArtifacts@1
  inputs:
    PathtoPublish: 'app/build/outputs/apk/debug'
    ArtifactName: 'debug-apk'
    publishLocation: 'Container'
  displayName: 'Publish APK artifact'